#+title: linux commands and shell scripting 
* intro
** os
*** intro
- manages hardware and resources
- allows interaction with hardware
- unix. eg: oracle solaris (open solaris), freebsd, hp-ux, ibm aix, apple macos
- linux - free and open source (foss), secure, multi-user, multi-tasking, portable
*** linux layers
|-------------+----------------------------------------------------------+-------|
| layer       | function                                                 | notes |
|-------------+----------------------------------------------------------+-------|
| ui          | keyboard and mouse interaction                           | gui   |
| application | system daemons, shells, user apps, tools                 |       |
| os          | job scheduling, time tracking, file management           |       |
| kernel      | memory, processing, device drivers, security             |       |
| hardware    | processors, memory modules, i/o devices, storage, screen |       |
|-------------+----------------------------------------------------------+-------|
*** file system
|--------+-----------------------------+-------|
| item   | description                 | notes |
|--------+-----------------------------+-------|
| root   | top of the tree             |       |
| /bin   | run and execute programs    |       |
| /usr   | user programs               |       |
| /home  | personal working directory  |       |
| /boot  | startup system boot files   |       |
| /media | temporary media (cd or usb) |       |
| /sbin  |                             |       |
| /etc   |                             |       |
| /dev   |                             |       |
| /proc  |                             |       |
| /var   |                             |       |
| /tmp   |                             |       |
| /lib   |                             |       |
| /opt   |                             |       |
| /mnt   |                             |       |
| /srv   |                             |       |
|--------+-----------------------------+-------|
*** terminal overview
- shell - os level application that interprets commands. eg: bash, zsh
- terminal - appplication used to interact with shell  
** linux commands
- shell: getting information, navigating and working with files and directories, printing file and string contents, file compression and archiving​, performing network operations, monitoring performance and status of the system, its components and applications, and running batch jobs, such as etl operations
- basic: printenv SHELL, whoami, id, uname, ps, top, df, man, date
- file: cp, mv, rm, touch, chmod, wc, grep   
- navigation: ls, find, pwd, mkdir, cd, rmdir
- print: cat, more, head, tail, echo
- compression and archiving: tar, zip, unzip
  - archive and compress: tar -czf <destination.tar> <source>
  - decompress and extract: tar -xzf <fn> <destination>
  - zip (compress and bundle); tar (bundle and compress) 
- networking: hostname -s -i, ping, ifconfig, curl, wget (web get, download folders and files recursively) 
  - ip a
  - ip addr show <device> 
- informational: whoami, id -u -n, uname -s -r -v, df -h ~, ps -e, top -n 3, date "+%j day of %Y", date "+It's %A today"
- wrangling text files:
  - general: sort <fn>, sort -r <fn>, uniq <fn>
  - grep - i <pattern> <fn>
  - cut -c <a-b> <fn>, cut -d ' ' f2 <fn>
  - paste -d "," <fn1> <fn2> <fn3>
** shell scripting
*** automate jobs
- etl jobs, file backups and archiving, system administrative tasks
- shebang (hash bang) directive: #!interpreter [optional-arg] - #(hash) + !(bang) --> hashbang --> shebang
- play with shell variables: firstName="John" && read lastName && echo $firstName $lastName
*** filters (grep, awk, wc) and pipes (|)
  - tr [OPTIONS] [target characters] [replacement characters]
  - echo "Linux and shell scripting are awesome\!" | tr "aeiou" "_"
  - cat pets.txt | tr "[a-z]" "[A-Z]"
  - cat Bitcoinprice.txt | grep -oE "\"price\"\s*:\s*[0-9]*\.?[0-9]*"
    -o tells grep to only return the matching portion
    -E tells grep to be able to use extended regex symbols such as ?
    \"price\" matches the string "price"
    \s* matches any number (including 0) of whitespace (\s) characters
    : matches :
    [0-9]* matches any number of digits (from 0 to 9)
    \.? optionally matches a .
- variables - set shell and environment variables (set | head -n 10) (set, unset)
  - environment variable - (export var_name) (env | head -n 10) 
*** features of bash shell
- meta characters (eg: # comments ; seperator * wildcard ? single character) 
- quoting (eg: \ escape " " interpret but evaluate meta char's ' ' interpret everything literally
- i/o redirection
  - (> redirect output to the file)
  - (>> append output to the file)
  - (2> redirect standard error to the file)
  - (2>> append standard error to the file) 
  - (< redirect file contents to standard input) 
- command substitution (eg: here=$(pwd) && echo $here)
- command line arguments 
- batch mode (command1; command 2)
- concurrent mode (command1 & command2)
- conditionals and loops (if/then/else for)
*** scheduling jobs using cron
- cron is a service that runs jobs
- crond is a daemon that interprets 'crontab files'
- crontab (cron table) contains jobs and schedule data 
- crontab -e
- syntax m h dom mon dow command (minute hour day-of-month month day-of-week) 
- crontab -l
